(this["webpackJsonpserial-monitor"]=this["webpackJsonpserial-monitor"]||[]).push([[0],{20:function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return r}));var o=t(10);class r extends o.EventEmitter{constructor(e){super(),this.maxChunkLength=void 0,this.port=void 0,this.reader=void 0,this.writer=void 0,this.status=void 0,this.maxChunkLength=e||256,this.port=null,this.reader=null,this.writer=null,this.status="disconnected"}async connect(e){const n=await this.createOrResetConnection();this.reader=await this.getSerialReader(e),this.handleSerialReading(),this.emit("connect",n)}async disconnect(){await this.stopReading(!0)}sendMessage(n){try{if("opened"!==this.status||!this.port||!this.port.writable)return;this.writer||(this.writer=this.port.writable.getWriter()),this.emit("send",n),this.writer.write(e.from(n))}catch(t){const e=t instanceof Error?t.message:String(t);console.error("Write error:",e)}}resetInternalState(){this.port=null,this.reader=null,this.writer=null,this.status="disconnected"}stopWriting(){var e;null===(e=this.writer)||void 0===e||e.releaseLock(),this.writer=null}async stopReading(e){var n;if("disconnected"!==this.status&&("connected"!==this.status||e)){if("connected"===this.status)return await this.closeSerialPort();this.status=e?"disconnecting":"closing",await(null===(n=this.reader)||void 0===n?void 0:n.cancel())}}async closeSerialPort(){var e;"disconnected"!==this.status&&this.port&&(this.stopWriting(),await(null===(e=this.port)||void 0===e?void 0:e.close()),this.resetInternalState())}async createOrResetConnection(){var e;return"opened"===this.status?(await this.stopReading(),this.stopWriting(),await(null===(e=this.port)||void 0===e?void 0:e.close()),this.status="connected",!0):(this.port&&await this.port.close(),this.port=await this.getSerialPort(),this.status="connected",!1)}async getSerialPort(){if(!navigator.serial)throw new Error("Serial API not supported");return await navigator.serial.requestPort()}async getSerialReader(e){try{var n;if(!this.port)return null;await this.port.open(e);const t=null===(n=this.port.readable)||void 0===n?void 0:n.getReader();if(!t)throw new Error("Device can't be read");return this.status="opened",t}catch(t){throw this.resetInternalState(),t}}async handleSerialReading(){try{if(!this.port||!this.reader)throw new Error("Unable to read the serial port");let e="";for(;"opened"===this.status;){const{value:n}=await this.reader.read();if(e+=(new TextDecoder).decode(n),!e)continue;const t=e.split("\n");this.emit("chunk",t[0]),e.indexOf("\n")>=0?(t.slice(0,-1).forEach((e=>this.emit("line",e))),e=t.pop()||""):e.length>this.maxChunkLength&&(this.emit("line",e),e="")}this.reader.releaseLock()}catch{this.resetInternalState()}finally{"closing"===this.status?this.status="connected":"disconnecting"===this.status&&await this.closeSerialPort(),this.emit("disconnect",this.status)}}}}).call(this,t(28).Buffer)},33:function(e,n,t){"use strict";t.r(n);var o=t(2),r=t.n(o),c=t(14),s=t.n(c),a=t(3);const l={breakingPoints:{mobile:768,smallDesktop:1024},colors:{icon:"#89A3F5",yellow:"#F1FA8C",red:"#FF5555",page:"#373849",logArea:"#23242F",logText:"#D8DCE9",warnText:"#F0F0C2",errorText:"#FFCECE",logBackground:"#2E2F3D",warnBackground:"#45462F",errorBackground:"#502D2D",sendBackground:"#3D415C",consoleHeader:"#292B38",consoleInput:"#44475A",consoleInputPlaceholder:"#A8ABBD",consoleScrollbar:"#44475A",consoleScrollbarHover:"#53576E",logIcon:"#56CCF2",warnIcon:"#EBF393",errorIcon:"#FF5555",infoIcon:"#4e86d9",managementBar:"#1E2029",managementBarText:"#E0E0E2",baudOptionHover:"#272834"}};var i=t(1);const d=Object(o.createContext)((()=>{})),h=e=>{let{children:n}=e;const[t,r]=Object(o.useState)(l),c=Object(o.useCallback)((()=>r((()=>l))),[]);return Object(i.jsx)(d.Provider,{value:c,children:Object(i.jsx)(a.a,{theme:t,children:n})})};var u,m,g,p,b,j,f=t(5),x=t(4);const O=a.c.div(u||(u=Object(x.a)(['\n  padding: 1rem;\n  margin: auto;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  &:nth-child(n + 2) {\n    padding-top: 2rem;\n  }\n\n  &[data-show="false"] {\n    display: none;\n  }\n']))),v=a.c.div(m||(m=Object(x.a)(["\n  display: none;\n  font-size: 2.25rem;\n  color: ",";\n"])),(e=>e.theme.colors.icon)),y=a.c.div(g||(g=Object(x.a)(["\n  text-align: center;\n  margin-top: 0.5rem;\n  font-size: 1.125rem;\n  color: ",";\n"])),(e=>e.theme.colors.logText)),C=a.c.button(p||(p=Object(x.a)(["\n  margin-top: 1.5rem;\n  background-color: ",";\n  padding: 0.5rem 1rem;\n  border: none;\n  border-radius: 0.25rem;\n  cursor: pointer;\n  user-select: none;\n\n  display: flex;\n  align-items: center;\n"])),(e=>e.theme.colors.consoleInput)),w=a.c.span(b||(b=Object(x.a)(["\n  margin-right: 0.375rem;\n  font-size: 1rem;\n  color: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(e=>e.theme.colors.logText)),S=a.c.span(j||(j=Object(x.a)(["\n  font-size: 1.25rem;\n  color: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(e=>e.theme.colors.icon)),k=e=>{let{show:n,onConnectionRequest:t}=e;return Object(i.jsxs)(O,{"data-show":n,children:[Object(i.jsx)(v,{children:Object(i.jsx)(f.f,{})}),Object(i.jsx)(y,{children:"No device connected"}),Object(i.jsxs)(C,{onClick:()=>t(),children:[Object(i.jsx)(w,{children:"Connect"}),Object(i.jsx)(S,{children:Object(i.jsx)(f.e,{})})]})]})},T=["error","warn","log","command","send","info"],L={log:"Logs",warn:"Warns",error:"Errors",command:"Commands",send:"Sent",info:"Info"};var B,E,I,z=t(7);const D=a.c.div(B||(B=Object(x.a)(["\n  margin-top: 0.5rem;\n  grid-area: clear;\n  background-color: ",";\n  border-radius: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  font-size: 0.875rem;\n  line-height: 1rem;\n  user-select: none;\n  cursor: pointer;\n\n  display: flex;\n"])),(e=>e.theme.colors.consoleInput)),M=a.c.span(E||(E=Object(x.a)(["\n  color: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(e=>e.theme.colors.logText)),R=a.c.span(I||(I=Object(x.a)(["\n  margin-left: 0.4rem;\n  color: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(e=>e.theme.colors.icon)),F=e=>{let{onClick:n}=e;return Object(i.jsxs)(D,{onClick:()=>n(),children:[Object(i.jsx)(M,{children:"Clear"}),Object(i.jsx)(R,{children:Object(i.jsx)(z.c,{})})]})};var A,P,H=t(8),q=t(6);const W=a.c.div(A||(A=Object(x.a)(["\n  margin-top: 0.5rem;\n  background-color: ",';\n  border-radius: 0.25rem;\n  padding: 0.25rem 0.5rem;\n  user-select: none;\n  cursor: pointer;\n\n  font-size: 1rem;\n  line-height: 1em;\n\n  display: flex;\n  align-items: center;\n\n  &:nth-child(n + 2) {\n    margin-left: 0.5rem;\n  }\n\n  &[data-type="log"] {\n    color: ',';\n  }\n\n  &[data-type="warn"] {\n    color: ',';\n  }\n\n  &[data-type="error"] {\n    color: ',';\n  }\n\n  &[data-type="send"] {\n    color: ',';\n  }\n\n  &[data-type="info"] {\n    color: ',';\n  }\n\n  &[data-selected="true"] {\n    outline: 2px solid ',";\n  }\n"])),(e=>e.theme.colors.consoleInput),(e=>e.theme.colors.logIcon),(e=>e.theme.colors.warnIcon),(e=>e.theme.colors.errorIcon),(e=>e.theme.colors.icon),(e=>e.theme.colors.infoIcon),(e=>e.theme.colors.icon)),_=a.c.span(P||(P=Object(x.a)(["\n  color: ",";\n  margin-left: 0.25rem;\n  font-size: 0.875rem;\n  line-height: 1em;\n"])),(e=>e.theme.colors.logText)),K={log:z.b,warn:H.b,error:f.a,command:z.a,send:q.b,info:H.a},N=e=>{let{type:n,count:t,selected:o,onSelectChange:r}=e;const c=K[n];if(!t&&!o||!c)return null;return Object(i.jsxs)(W,{"data-type":n,"data-selected":!!o,onClick:()=>{r(o?void 0:n)},title:L[n],children:[Object(i.jsx)(c,{}),Object(i.jsx)(_,{children:t})]})};var Y,Z,J,U,G=t(18);const V=a.c.div(Y||(Y=Object(x.a)(["\n  grid-area: search;\n  position: relative;\n"]))),Q=a.c.input(Z||(Z=Object(x.a)(["\n  width: 100%;\n  padding: 0.375rem 4rem 0.375rem 0.75rem;\n  background-color: ",";\n  border: none;\n  border-radius: 0.25rem;\n  color: ",";\n\n  font-size: 1rem;\n  line-height: 1.25rem;\n\n  &::placeholder {\n    color: ",";\n  }\n\n  &:focus {\n    outline: 2px solid ",";\n  }\n"])),(e=>e.theme.colors.consoleInput),(e=>e.theme.colors.logText),(e=>e.theme.colors.consoleInputPlaceholder),(e=>e.theme.colors.icon)),X=a.c.div(J||(J=Object(x.a)(["\n  position: absolute;\n  right: 0.5rem;\n  top: 0;\n\n  font-size: 1.25rem;\n  height: 2rem;\n  width: 1.5rem;\n  color: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(e=>e.theme.colors.icon)),$=a.c.div(U||(U=Object(x.a)(["\n  position: absolute;\n  right: 2rem;\n  top: 0;\n\n  font-size: 1.5rem;\n  height: 2rem;\n  width: 1.5rem;\n  color: ",";\n  cursor: pointer;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(e=>e.theme.colors.icon)),ee=e=>{let{value:n,onChange:t,onClear:o,...r}=e;return Object(i.jsxs)(V,{...r,children:[Object(i.jsx)(Q,{placeholder:"Search",value:n,onChange:e=>t(e.target.value)}),Object(i.jsx)(X,{children:Object(i.jsx)(G.a,{})}),n?Object(i.jsx)($,{title:"Clear",onClick:()=>o(),children:Object(i.jsx)(f.b,{})}):null]})};var ne,te;const oe=a.c.div(ne||(ne=Object(x.a)(["\n  margin-top: 0.5rem;\n  grid-area: message;\n  font-size: 0.875rem;\n  color: ",";\n  overflow: hidden;\n  text-overflow: ellipsis;\n  text-align: center;\n"])),(e=>e.theme.colors.logText)),re=a.c.span(te||(te=Object(x.a)(["\n  font-weight: bold;\n"]))),ce=e=>{let{search:n,selectedType:t}=e;return Object(i.jsxs)(oe,{children:[n&&Object(i.jsxs)(i.Fragment,{children:["Showing results matching ",Object(i.jsx)(re,{children:n})]}),t&&(n?Object(i.jsxs)(i.Fragment,{children:[" ","in ",Object(i.jsx)(re,{children:L[t]})," ","category"]}):Object(i.jsxs)(i.Fragment,{children:["Showing results in"," ",Object(i.jsx)(re,{children:L[t]})," category"]}))]})};var se,ae;const le=a.c.div(se||(se=Object(x.a)(["\n  padding: 0.5rem;\n  background-color: ",';\n\n  display: grid;\n  grid-template-areas:\n    "search search"\n    "types clear"\n    "message message";\n  grid-template-columns: 1fr auto;\n\n  box-shadow: 0 0.5rem 0.75rem ',";\n  z-index: 2;\n"])),(e=>e.theme.colors.consoleHeader),(e=>e.theme.colors.logArea)),ie=a.c.div(ae||(ae=Object(x.a)(["\n  grid-area: types;\n\n  display: flex;\n"]))),de=e=>{let{search:n,selectedType:t,logTypesCount:o,showClearButton:r,onSearchChange:c,onSearchClear:s,onSelectedTypeChange:a,onClearLogs:l,...d}=e;return Object(i.jsxs)(le,{...d,children:[Object(i.jsx)(ee,{value:n,onChange:c,onClear:s}),Object(i.jsx)(ie,{children:T.map((e=>Object(i.jsx)(N,{type:e,count:o[e],selected:t===e,onSelectChange:a},e)))}),r?Object(i.jsx)(F,{onClick:l}):null,n||t?Object(i.jsx)(ce,{search:n,selectedType:t}):null]})},he=e=>{const n=e.getHours().toString().padStart(2,"0"),t=e.getMinutes().toString().padStart(2,"0"),o=e.getSeconds().toString().padStart(2,"0");return"".concat(n,":").concat(t,":").concat(o)};var ue,me,ge,pe;const be=a.c.div(ue||(ue=Object(x.a)(["\n  --icon-color: ",";\n\n  border-radius: 0.25rem;\n  padding: 0.5rem;\n  color: ",";\n  background-color: ",';\n  margin-right: 2rem;\n  overflow: hidden;\n\n  display: flex;\n\n  &[data-type="warn"] {\n    --icon-color: ',";\n\n    color: ",";\n    background-color: ",';\n  }\n\n  &[data-type="error"] {\n    --icon-color: ',";\n\n    color: ",";\n    background-color: ",';\n  }\n\n  &[data-type="send"] {\n    background-color: ',';\n    margin-right: initial;\n    margin-left: 2rem;\n  }\n\n  &[data-type="info"] {\n    background-color: transparent;\n    margin: 0 2rem;\n\n    & > :last-child {\n      align-self: center;\n    }\n  }\n\n  &:nth-child(n + 2) {\n    margin-top: 0.1875rem;\n\n    &[data-first-of-type="true"] {\n      margin-top: 0.5rem;\n    }\n  }\n'])),(e=>e.theme.colors.logText),(e=>e.theme.colors.logText),(e=>e.theme.colors.logBackground),(e=>e.theme.colors.warnIcon),(e=>e.theme.colors.warnText),(e=>e.theme.colors.warnBackground),(e=>e.theme.colors.errorIcon),(e=>e.theme.colors.errorText),(e=>e.theme.colors.errorBackground),(e=>e.theme.colors.sendBackground)),je=a.c.div(me||(me=Object(x.a)(["\n  color: var(--icon-color);\n  font-size: 1rem;\n  margin-right: 0.3125rem;\n\n  display: flex;\n  justify-content: center;\n"]))),fe=a.c.pre(ge||(ge=Object(x.a)(["\n  overflow: hidden;\n  flex: 1;\n  font-size: 0.875rem;\n  letter-spacing: 0.75px;\n  line-height: 1.25rem;\n  white-space: break-spaces;\n"]))),xe=a.c.div(pe||(pe=Object(x.a)(["\n  font-size: 0.75rem;\n  align-self: flex-end;\n  margin-left: 1rem;\n  opacity: 0.8;\n"]))),Oe={log:null,warn:H.b,error:f.a,command:null,send:null,info:null},ve=e=>{let{type:n,content:t,timestamp:o,isFirstOfType:r}=e;const c=Oe[n];return Object(i.jsxs)(be,{"data-type":n,"data-first-of-type":r,children:[c&&Object(i.jsx)(je,{children:Object(i.jsx)(c,{})}),Object(i.jsx)(fe,{children:t}),Object(i.jsx)(xe,{children:he(o)})]})};var ye=t(19);const Ce=[2e6,1e6,5e5,25e4,230400,115200,57600,38400,31250,28800,19200,14400,9600,4800,2400,1200,600,300];var we,Se,ke,Te,Le,Be,Ee,Ie,ze;const De=a.c.div(we||(we=Object(x.a)(["\n  --animation-duration: 0.25s;\n\n  height: 2rem;\n  padding: 0 0.5rem;\n  cursor: pointer;\n  user-select: none;\n  position: relative;\n\n  display: flex;\n  align-items: center;\n"]))),Me=a.c.span(Se||(Se=Object(x.a)(["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1em;\n  white-space: nowrap;\n"])),(e=>e.theme.colors.managementBarText)),Re=a.c.span(ke||(ke=Object(x.a)(["\n  margin-left: 0.25rem;\n  color: ",';\n  line-height: 1em;\n  transition-duration: var(--animation-duration);\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &[data-rotate="true"] {\n    transform: rotateZ(180deg);\n  }\n'])),(e=>e.theme.colors.icon)),Fe=a.c.div(Te||(Te=Object(x.a)(['\n  --options-top-position: 2rem;\n\n  cursor: default;\n  z-index: 2;\n  opacity: 0;\n  pointer-events: none;\n  transition-duration: var(--animation-duration);\n\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  &[data-show="true"] {\n    --options-top-position: 2.5rem;\n\n    opacity: 1;\n    pointer-events: all;\n  }\n']))),Ae=a.c.div(Le||(Le=Object(x.a)(["\n  border-radius: 0.25rem;\n  box-shadow: 0 0 0.5rem rgba(0, 0, 0, 0.25);\n  background-color: ",";\n  padding: 0.5rem 0;\n  transition-duration: var(--animation-duration);\n\n  position: absolute;\n  top: var(--options-top-position);\n  right: 0.5rem;\n"])),(e=>e.theme.colors.logBackground)),Pe=a.c.ul(Be||(Be=Object(x.a)(["\n  max-height: calc(100vh - 4rem);\n  overflow: hidden auto;\n"]))),He=a.c.li(Ee||(Ee=Object(x.a)(["\n  list-style: none;\n  padding: 0.25rem 1rem 0.25rem 2rem;\n  transition-duration: color var(--animation-duration);\n  cursor: pointer;\n\n  display: flex;\n  align-items: center;\n\n  &:hover {\n    background-color: ",";\n  }\n"])),(e=>e.theme.colors.baudOptionHover)),qe=a.c.span(Ie||(Ie=Object(x.a)(["\n  flex: 1;\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1em;\n  margin-right: 0.5rem;\n\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"])),(e=>e.theme.colors.logText)),We=a.c.span(ze||(ze=Object(x.a)(["\n  font-size: 1.125rem;\n  line-height: 1em;\n  color: ",';\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &[data-selected="false"] {\n    opacity: 0;\n  }\n'])),(e=>e.theme.colors.icon)),_e=e=>{let{baud:n,onBaudChange:t}=e;const[r,c]=Object(o.useState)(!1),s=Object(o.useRef)(null);return Object(i.jsxs)(De,{onClick:()=>c(!0),children:[Object(i.jsxs)(Me,{children:[n," baud"]}),Object(i.jsx)(Re,{"data-rotate":r,children:Object(i.jsx)(q.a,{})}),Object(i.jsx)(Fe,{"data-show":r,onClick:e=>{e.stopPropagation(),e.target===s.current&&c(!1)},ref:s,children:Object(i.jsx)(Ae,{children:Object(i.jsx)(Pe,{children:Ce.map((e=>Object(i.jsxs)(He,{onClick:()=>(e=>{t(e),c(!1)})(e),children:[Object(i.jsx)(qe,{children:e}),Object(i.jsx)(We,{"data-selected":e===n,children:Object(i.jsx)(ye.a,{})})]},e)))})})})]})};var Ke,Ne,Ye;const Ze=a.c.div(Ke||(Ke=Object(x.a)(["\n  height: 2rem;\n  padding: 0 0.5rem;\n  user-select: none;\n  cursor: pointer;\n\n  display: flex;\n  align-items: center;\n"]))),Je=a.c.span(Ne||(Ne=Object(x.a)(["\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1em;\n"])),(e=>e.theme.colors.managementBarText)),Ue=a.c.span(Ye||(Ye=Object(x.a)(["\n  color: ",";\n  margin-left: 0.25rem;\n  font-size: 1rem;\n  line-height: 1em;\n"])),(e=>e.theme.colors.icon)),Ge=e=>{let{isConnected:n,onConnectionRequestChange:t}=e;return Object(i.jsxs)(Ze,{onClick:()=>t(!n),children:[Object(i.jsx)(Je,{children:n?"Disconnect":"Connect"}),Object(i.jsx)(Ue,{children:n?Object(i.jsx)(f.f,{}):Object(i.jsx)(f.e,{})})]})};var Ve,Qe;const Xe=a.c.div(Ve||(Ve=Object(x.a)(["\n  background-color: ",";\n\n  display: flex;\n  justify-content: space-between;\n\n  z-index: 3;\n"])),(e=>e.theme.colors.managementBar)),$e=a.c.div(Qe||(Qe=Object(x.a)(["\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  color: ",";\n  font-size: 0.875rem;\n  line-height: 1rem;\n  padding: 0.5rem 0.25rem;\n"])),(e=>e.theme.colors.managementBarText)),en=e=>{let{deviceInfo:n,baud:t,onConnectionRequestChange:o,onBaudChange:r}=e;return Object(i.jsxs)(Xe,{children:[Object(i.jsx)(Ge,{isConnected:!!n,onConnectionRequestChange:o}),Object(i.jsx)($e,{children:n}),Object(i.jsx)(_e,{baud:t,onBaudChange:r})]})};var nn,tn,on,rn;const cn=a.c.div(nn||(nn=Object(x.a)(["\n  height: 100%;\n  padding: 1rem;\n  overflow-y: auto;\n\n  display: flex;\n"]))),sn=a.c.div(tn||(tn=Object(x.a)(["\n  margin: auto;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),an=a.c.div(on||(on=Object(x.a)(["\n  font-size: 2.25rem;\n  color: ",";\n"])),(e=>e.theme.colors.icon)),ln=a.c.div(rn||(rn=Object(x.a)(["\n  margin-top: 0.5rem;\n  font-size: 1rem;\n  color: ",";\n"])),(e=>e.theme.colors.logText)),dn=()=>Object(i.jsx)(cn,{children:Object(i.jsxs)(sn,{children:[Object(i.jsx)(an,{children:Object(i.jsx)(f.d,{})}),Object(i.jsx)(ln,{children:"Nothing found"})]})});var hn;const un=a.c.button(hn||(hn=Object(x.a)(["\n  width: 1.875rem;\n  height: 1.875rem;\n  border-radius: 50%;\n  background-color: ",";\n  box-shadow: 0 0 0.5rem rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n  border: none;\n  transition-duration: 0.25s;\n  transition-delay: 0.2s;\n\n  font-size: 1.125rem;\n  color: ",';\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  & > * {\n    transform: rotateZ(270deg);\n  }\n\n  &[data-top="true"] {\n    & > * {\n      transform: rotateZ(90deg);\n    }\n  }\n\n  &[data-show="false"] {\n    opacity: 0;\n    pointer-events: none;\n  }\n'])),(e=>e.theme.colors.icon),(e=>e.theme.colors.logArea)),mn=e=>{let{show:n,top:t,...o}=e;return Object(i.jsx)(un,{...o,"data-show":n,"data-top":!!t,children:Object(i.jsx)(f.c,{})})};var gn;const pn=a.c.div(gn||(gn=Object(x.a)(["\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  bottom: 1rem;\n  pointer-events: none;\n\n  & > * {\n    pointer-events: all;\n  }\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),bn=e=>{let{showScrollTop:n,showScrollDown:t,onScrollTop:o,onScrollDown:r}=e;return Object(i.jsxs)(pn,{children:[Object(i.jsx)(mn,{show:n,onClick:o,title:"Top",top:!0}),Object(i.jsx)(mn,{show:t,onClick:r,title:"Bottom"})]})};var jn,fn,xn;const On=a.c.div(jn||(jn=Object(x.a)(["\n  height: 100%;\n  width: 100%;\n  max-width: 600px;\n  overflow: hidden;\n  background-color: ",";\n\n  display: flex;\n  flex-direction: column;\n"])),(e=>e.theme.colors.logArea)),vn=a.c.div(fn||(fn=Object(x.a)(["\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n"]))),yn=a.c.ul(xn||(xn=Object(x.a)(['\n  height: 100%;\n  padding: 1rem 0.5rem;\n  overflow-y: auto;\n\n  &[data-child-full-size="true"] {\n    display: flex;\n  }\n'])));var Cn,wn,Sn;const kn=a.c.div(Cn||(Cn=Object(x.a)(["\n  grid-area: search;\n  position: relative;\n  padding: 0.5rem;\n  background-color: ",";\n"])),(e=>e.theme.colors.consoleHeader)),Tn=a.c.input(wn||(wn=Object(x.a)(["\n  width: 100%;\n  padding: 0.375rem 2.5rem 0.375rem 0.75rem;\n  background-color: ",";\n  border: none;\n  border-radius: 0.25rem;\n  color: ",";\n\n  font-size: 1rem;\n  line-height: 1.25rem;\n\n  &::placeholder {\n    color: ",";\n  }\n\n  &:focus {\n    outline: 2px solid ",";\n  }\n"])),(e=>e.theme.colors.consoleInput),(e=>e.theme.colors.logText),(e=>e.theme.colors.consoleInputPlaceholder),(e=>e.theme.colors.icon)),Ln=a.c.div(Sn||(Sn=Object(x.a)(["\n  position: absolute;\n  right: 1rem;\n  top: 0.5rem;\n\n  font-size: 1.25rem;\n  height: 2rem;\n  width: 1.5rem;\n  color: ",";\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"])),(e=>e.theme.colors.icon)),Bn=e=>{let{message:n,onMessageChange:t,onSend:o,...r}=e;return Object(i.jsxs)(kn,{...r,children:[Object(i.jsx)(Tn,{placeholder:"Send",value:n,onChange:e=>t(e.target.value),onKeyDown:e=>{"Enter"===e.key&&o("".concat(n,"\r\n"))}}),Object(i.jsx)(Ln,{children:Object(i.jsx)(q.b,{title:"Enviar",onClick:()=>o(n)})})]})},En=e=>{var n;let{logs:t,logChunk:r,baud:c,deviceInfo:s,logsContainerRef:a,logTypesCount:l,showScrollTopButton:d,showScrollDownButton:h,sendMessage:u,onSearch:m,onSelectedType:g,onClearLogs:p,onBaudChange:b,onConnectionRequestChange:j,onScrollTopClick:f,onScrollDownClick:x,onMessageChange:O,onSendMessage:v}=e;const[y,C]=Object(o.useState)(""),[w,S]=Object(o.useState)(),T=e=>{C(e),m(e)},L=e=>{S(e),g(e)};return Object(i.jsxs)(On,{children:[Object(i.jsx)(en,{deviceInfo:s,onConnectionRequestChange:j,baud:c,onBaudChange:b}),Object(i.jsx)(de,{search:y,logTypesCount:l,selectedType:w,showClearButton:!y&&!w&&!!t.length,onSearchChange:T,onSelectedTypeChange:L,onSearchClear:()=>{T(""),L(void 0)},onClearLogs:()=>{T(""),L(void 0),p()}}),y&&!t.length?Object(i.jsx)(dn,{}):Object(i.jsxs)(vn,{children:[Object(i.jsxs)(yn,{ref:a,"data-child-full-size":!t.length,children:[t.map(((e,n,t)=>{var r;return Object(o.createElement)(ve,{...e,key:e.id,isFirstOfType:!((null===(r=t[n-1])||void 0===r?void 0:r.type)===e.type)})})),r&&Object(o.createElement)(ve,{...r,key:r.id,isFirstOfType:!((null===(n=t[t.length-1])||void 0===n?void 0:n.type)===r.type)}),Object(i.jsx)(k,{show:!(y||w)&&!s,onConnectionRequest:()=>j(!0)})]}),Object(i.jsx)(bn,{showScrollTop:d,showScrollDown:h,onScrollTop:f,onScrollDown:x})]}),!!s&&Object(i.jsx)(Bn,{message:u,onMessageChange:O,onSend:v})]})},In=(e,n,t)=>{const r=t.current,c=Object(o.useMemo)((()=>({scrollTop:r?r.scrollTop:0,scrollLeft:r?r.scrollLeft:0,diffTop:0,diffLeft:0})),[r]);Object(o.useEffect)((()=>{const n=t.current;if(!n)return;const o=()=>{const t=n.scrollTop-c.scrollTop,o=n.scrollLeft-c.scrollLeft,r=zn(t,c.diffTop),s=zn(o,c.diffLeft);c.scrollTop=n.scrollTop,c.scrollLeft=n.scrollLeft,c.diffTop=t,c.diffLeft=o,(r||s)&&e({x:o,y:t})};return n.addEventListener("scroll",o),()=>n.removeEventListener("scroll",o)}),[r,c,...n])},zn=(e,n)=>e*n<0,Dn=(e,n,t,r)=>{const c=t.current;Object(o.useEffect)((()=>{if(!c)return;let n=!1;const t=t=>{const o=(e=>{const n=getComputedStyle(e),t=parseInt(n.width),o=parseInt(n.height);return{offset:{top:Math.max(e.scrollTop,0),bottom:Math.max(e.scrollHeight-e.scrollTop-o,0),left:Math.max(e.scrollLeft,0),right:Math.max(e.scrollWidth-e.scrollLeft-t,0)},ratio:{x:e.scrollLeft/(e.scrollWidth-t||1),y:e.scrollTop/(e.scrollHeight-o||1)}}})(c),s=Mn(o,r);s&&!n&&e(o),n=s};return c.addEventListener("scroll",t),()=>c.removeEventListener("scroll",t)}),[c,...n])},Mn=(e,n)=>Rn(e,n)||Fn(e,n),Rn=(e,n)=>{const t=e.ratio;if(!n.ratio)return!1;const{x:o,y:r}=null===n||void 0===n?void 0:n.ratio;return!!(null!==o&&void 0!==o&&o.min&&t.x<o.min||null!==o&&void 0!==o&&o.max&&t.x>o.max||null!==r&&void 0!==r&&r.min&&t.y<r.min||null!==r&&void 0!==r&&r.max&&t.y>r.max)},Fn=(e,n)=>{const t=e.offset;if(!n.offset)return!1;const{top:o,bottom:r,left:c,right:s}=null===n||void 0===n?void 0:n.offset;return!!(null!==o&&void 0!==o&&o.min&&t.top<o.min||null!==o&&void 0!==o&&o.max&&t.top>o.max||null!==r&&void 0!==r&&r.min&&t.bottom<r.min||null!==r&&void 0!==r&&r.max&&t.bottom>r.max||null!==c&&void 0!==c&&c.min&&t.left<c.min||null!==c&&void 0!==c&&c.max&&t.left>c.max||null!==s&&void 0!==s&&s.min&&t.right<s.min||null!==s&&void 0!==s&&s.max&&t.right>s.max)};var An=t(10);function Pn(e){if(Array.isArray(e))return e.map((e=>Pn(e)));if("object"!==typeof e||!e)return e;const n={};return Object.keys(e).forEach((t=>n[t]=Pn(e[t]))),n}const Hn="__KEY_VALUE_MANAGER_ALL_KEYS_SYMBOL";class qn extends An.EventEmitter{constructor(e){if(super(),this.data=void 0,"object"!==typeof e)throw new Error("Data must be an object.");this.data=Pn(e),Object.keys(this.data).forEach((e=>{const n=e;if(e===Hn)throw new Error("".concat(Hn," is an exclusive object key."));Object.defineProperty(this,e,{get:()=>this.data[n],set:t=>(this.data[n]=t,this.emit(e.toString(),this.data),this.data[n])})}))}addChangeListener(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 1===n.length?this.addListener(Hn,n[0]):this.addListener(n[0].toString(),n[1]),this}removeChangeListener(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 1===n.length?this.removeListener(Hn,n[0]):this.removeListener(n[0].toString(),n[1]),this}}const Wn=qn,_n=e=>{let{source:n,search:t}=e;return n.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>=0},Kn=()=>{const e=Date.now();return e+Math.random()*e},Nn=(e,n)=>({id:Kn(),content:n,type:e,timestamp:new Date});var Yn=t(20);const Zn={log:0,error:0,warn:0,info:0,command:0,send:0},Jn={search:"",selectedType:void 0,logs:[],logChunk:null,page:3,baud:115200,readyToConnect:!1,isConnected:!1,autoScroll:!0,showScrollTopButton:!1,showScrollDownButton:!1,logTypesCount:{...Zn},filteredIndex:0,filteredLogs:[],filteredLogTypesCount:{...Zn}},Un=()=>{const e=Object(o.useMemo)((()=>new Wn(Jn)),[]),n=Object(o.useMemo)((()=>new Yn.a),[]),t=Object(o.useRef)(),r=Object(o.useRef)(!1),[c,s]=Object(o.useState)(0),[a,l]=Object(o.useState)("");Object(o.useEffect)((()=>{const e=setInterval((()=>{s((e=>e+1))}),200);return()=>clearInterval(e)}),[]);const d=Object(o.useCallback)((()=>{e.page=3,e.autoScroll=!0,e.logs=[],e.showScrollTopButton=!1,e.showScrollDownButton=!1,e.logTypesCount={...Zn},s((e=>e+1))}),[e]),h=Object(o.useCallback)((n=>e.baud=n),[e]),u=Object(o.useCallback)((n=>e.logChunk=n?Nn("log",n):null),[e]),m=Object(o.useCallback)((n=>{e.logChunk=null,e.logs.push(n),e.logTypesCount[n.type]++}),[e]),g=Object(o.useCallback)((e=>m(Nn("log",e))),[m]),p=Object(o.useCallback)((e=>m(Nn("send",e))),[m]),b=Object(o.useCallback)((n=>{m(Nn("info","Device ".concat(n?"port reopened":"connected"))),e.isConnected=!0}),[e,m]),j=Object(o.useCallback)((async n=>{const t="Device ".concat("disconnected"===n?"disconnected":"port closed"),o=Nn("info",t);e.logChunk&&m(e.logChunk),m(o),e.logChunk=null,e.isConnected=!1,e.autoScroll=!0,"disconnected"===n&&(e.readyToConnect=!1)}),[e,m]);Object(o.useEffect)((()=>{const n=()=>{e.autoScroll=e.isConnected};return e.addChangeListener("isConnected",n),()=>{e.removeChangeListener("isConnected",n)}}),[e]),Object(o.useEffect)((()=>{const n=()=>{e.page=3,e.showScrollDownButton=!1,e.showScrollTopButton=!1};return e.addChangeListener("search",n),e.addChangeListener("selectedType",n),()=>{e.removeChangeListener("search",n),e.removeChangeListener("selectedType",n)}}),[e]),Object(o.useEffect)((()=>(n.addListener("chunk",u),n.addListener("line",g),n.addListener("send",p),n.addListener("connect",b),n.addListener("disconnect",j),()=>{n.removeListener("chunk",u),n.removeListener("line",g),n.removeListener("send",p),n.removeListener("connect",b),n.removeListener("disconnect",j)})),[u,g,b,j,n]),Object(o.useEffect)((()=>{const t=async()=>{try{if(!e.readyToConnect)return;await n.connect({baudRate:e.baud})}catch(t){m(Nn("info",t.message)),e.readyToConnect=!1}};return e.addChangeListener("readyToConnect",t),e.addChangeListener("baud",t),()=>{e.removeChangeListener("readyToConnect",t),e.removeChangeListener("baud",t)}}),[e,n,m]),Object(o.useEffect)((()=>{const t=async()=>{e.readyToConnect||await n.disconnect()};return e.addChangeListener("readyToConnect",t),()=>{e.removeChangeListener("readyToConnect",t)}}),[e,n]),Object(o.useMemo)((()=>{e.filteredIndex=0,e.filteredLogs=[],e.filteredLogTypesCount={...Zn}}),[e.search,e.selectedType,e]),Object(o.useMemo)((()=>{if(!e.search&&!e.selectedType)return;const{filtered:n,count:t,endIndex:o}=(e=>{let{logs:n,search:t,type:o,startIndex:r,maxCharCount:c}=e;const s={};T.forEach((e=>s[e]=0));const a=[];let l=r;for(let i=n.length,d=0;l<i&&d<c;l+=1){const e=n[l];o&&o!==e.type||t&&!_n({source:e.content,search:t})||(a.push(e),s[e.type]+=1,d+=e.content.length)}return{filtered:a,count:s,endIndex:l}})({logs:e.logs,search:e.search,type:e.selectedType,startIndex:e.filteredIndex,maxCharCount:1e5});e.filteredIndex=o,e.filteredLogs.push(...n);for(const r in t){const n=r;e.filteredLogTypesCount[n]+=t[n]}}),[c,e]);const f=!(!e.search&&!e.selectedType);let x=f?e.filteredLogs:e.logs,O=f?e.filteredLogTypesCount:e.logTypesCount;const v=Math.max(Math.ceil(x.length/40),3),y=Math.max(v,3);e.autoScroll&&(e.page=y);const C=((e,n)=>{const t=(n.page-n.pages)*n.pageSize,o=t+n.pageSize*n.pages;return e.slice(t,o)})(x,{page:e.page,pages:3,pageSize:40});Object(o.useEffect)((()=>{const n=()=>{e.autoScroll&&(e.page=y)};return e.addChangeListener("autoScroll",n),()=>{e.removeChangeListener("autoScroll",n)}}),[e,y]),Dn((()=>{const n=e.page;e.page=n>3?n-1:n}),[],t,{offset:{top:{min:1e3}}}),Dn((()=>{const n=e.page;e.page=n>3?n-1:n}),[],t,{offset:{top:{min:200}}}),Dn((()=>{const n=e.page;e.page=n<v?n+1:n}),[v],t,{offset:{bottom:{min:1e3}}}),Dn((()=>{const n=e.page;e.page=n<v?n+1:n}),[v],t,{offset:{bottom:{min:200}}}),Dn((()=>{e.page===y&&(e.autoScroll=!0,e.showScrollDownButton=!1)}),[y],t,{offset:{bottom:{min:100}}}),Dn((()=>{e.autoScroll&&r.current&&(e.autoScroll=!1)}),[],t,{offset:{bottom:{max:1}}}),Dn((()=>{3===e.page&&(e.showScrollTopButton=!1)}),[],t,{offset:{top:{min:200}}}),In((n=>e.showScrollTopButton=n.y<0),[],t),In((n=>e.showScrollDownButton=n.y>0&&!e.autoScroll),[],t);const w=Object(o.useCallback)((()=>{var n;e.autoScroll=!1,e.page=3,e.showScrollTopButton=!1,null===(n=t.current)||void 0===n||n.scrollTo(0,0)}),[e]),S=Object(o.useCallback)((()=>{e.autoScroll=!0,e.showScrollDownButton=!1}),[e]),k=Object(o.useCallback)((n=>e.search=n),[e]),L=Object(o.useCallback)((n=>e.selectedType=n),[e]),B=Object(o.useCallback)((n=>e.readyToConnect=n),[e]),E=Object(o.useCallback)((e=>{l(""),n.sendMessage(e)}),[n]);return Object(o.useEffect)((()=>{var n;r.current=!0,e.autoScroll&&(null===(n=t.current)||void 0===n||n.scrollTo(0,t.current.scrollHeight))}),[e,c]),r.current=!1,Object(i.jsx)(En,{logs:C,logChunk:f?null:e.logChunk,baud:e.baud,deviceInfo:e.isConnected?"Connected":"",logsContainerRef:t,logTypesCount:O,showScrollTopButton:e.showScrollTopButton,showScrollDownButton:e.showScrollDownButton,sendMessage:a,onSearch:k,onSelectedType:L,onClearLogs:d,onBaudChange:h,onConnectionRequestChange:B,onScrollTopClick:w,onScrollDownClick:S,onMessageChange:l,onSendMessage:E})};var Gn;const Vn=a.c.div(Gn||(Gn=Object(x.a)(["\n  height: 100vh;\n  background-color: ",";\n\n  display: flex;\n  justify-content: flex-end;\n"])),(e=>e.theme.colors.page)),Qn=()=>Object(i.jsx)(Vn,{children:Object(i.jsx)(Un,{})});var Xn;const $n=Object(a.b)(Xn||(Xn=Object(x.a)(['\n  * {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    outline: none;\n    font-family: "Roboto", sans-serif;\n  }\n\n\n  // webkit based browsers\n\n  ::-webkit-scrollbar {\n    width: 0.5rem;\n    height: 0.5rem;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: ',";\n  }\n\n  ::-webkit-scrollbar-thumb:hover {\n    background-color: ",";\n  }\n\n  ::-webkit-scrollbar-track {\n    background-color: transparent;\n  }\n\n\n  // mozila only\n\n  * {\n    scrollbar-width: thin;\n    scrollbar-color: "," transparent;\n  }\n"])),(e=>e.theme.colors.consoleScrollbar),(e=>e.theme.colors.consoleScrollbarHover),(e=>e.theme.colors.consoleScrollbar)),et=()=>Object(i.jsxs)(h,{children:[Object(i.jsx)($n,{}),Object(i.jsx)(Qn,{})]});s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(et,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.720b98cc.chunk.js.map